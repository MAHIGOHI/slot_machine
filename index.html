<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Core Survival</title>
<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#06080f;
  overflow:hidden;
}
canvas{display:block;}
</style>
</head>

<body>
<canvas id="c"></canvas>

<script>
const c=document.getElementById("c");
const x=c.getContext("2d");
let w,h;
resize();
window.onresize=resize;

let player={x:0,y:0,r:12};
let enemies=[];
let alive=false;
let speed=1.2;

function resize(){
  w=c.width=innerWidth;
  h=c.height=innerHeight;
  player.x=w/2;
  player.y=h/2;
}

function start(){
  enemies=[];
  speed=1.2;
  alive=true;
}

function spawn(){
  const e={
    x:Math.random()<0.5?0:w,
    y:Math.random()*h,
    r:8,
  };
  enemies.push(e);
}

c.addEventListener("touchstart",e=>{
  start();
});

c.addEventListener("touchmove",e=>{
  const t=e.touches[0];
  player.x=t.clientX;
  player.y=t.clientY;
});

c.addEventListener("touchend",()=>{
  alive=false;
});

function loop(){
  x.fillStyle="rgba(6,8,15,0.35)";
  x.fillRect(0,0,w,h);

  if(alive && Math.random()<0.04) spawn();

  // enemies
  for(let i=enemies.length-1;i>=0;i--){
    let e=enemies[i];
    let dx=player.x-e.x;
    let dy=player.y-e.y;
    let d=Math.hypot(dx,dy);
    e.x+=dx/d*speed;
    e.y+=dy/d*speed;

    if(d<player.r+e.r){
      alive=false;
    }

    x.fillStyle="#ff3355";
    x.beginPath();
    x.arc(e.x,e.y,e.r,0,Math.PI*2);
    x.fill();
  }

  // player
  x.fillStyle=alive?"#4f8cff":"#888";
  x.beginPath();
  x.arc(player.x,player.y,player.r,0,Math.PI*2);
  x.fill();

  if(alive) speed+=0.0006;

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>